{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0d3eacf7_711023aa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000185
      },
      "writtenOn": "2021-12-29T07:12:30Z",
      "side": 1,
      "message": "\u003e Patch Set 2:\n\u003e \n\u003e \u003e Patch Set 2:\n\u003e \u003e \n\u003e \u003e \u003e Patch Set 2:\n\u003e \u003e \u003e \n\u003e \u003e \u003e Hi Manash,\n\u003e \u003e \u003e Thanks your suggestion, I have provided the latest patch.\n\u003e \u003e \u003e Please help me to review it again. Thank you.\n\u003e \u003e \u003e \n\u003e \u003e \u003e Sincerely,\n\u003e \u003e \u003e Tim\n\u003e \u003e \n\u003e \u003e Lee, please provide me snippet of the output of this testcase execution.\n\u003e \n\u003e Hi Sarma,\n\u003e Here is the snippet about this test item. For you refer it. Thank you.\n\u003e \n\u003e TEST Verify Dump After Host Watchdog Error Injection\n\u003e Full Name:\tTest Bmc Dump.Verify Dump After Host Watchdog Error Injection\n\u003e Documentation:\t\n\u003e Inject host watchdog error and verify whether dump is generated.\n\u003e \n\u003e Tags:\tVerify_Dump_After_Host_Watchdog_Error_Injection\n\u003e Start / End / Elapsed:\t20211228 16:08:03.038 / 20211228 16:12:50.834 / 00:04:47.796\n\u003e Status:\tPASS\n\u003e SETUP connection_client . Open Connection And Log In\n\u003e KEYWORD boot_utils . Redfish Power On\n\u003e KEYWORD BuiltIn . Run Keyword And Ignore Error Redfish Delete All BMC Dumps\n\u003e KEYWORD dump_utils . Trigger Core Dump\n\u003e KEYWORD utils . Set Auto Reboot ${1}\n\u003e KEYWORD utils . Trigger Host Watchdog Error 2000, 30\n\u003e KEYWORD BuiltIn . Wait Until Keyword Succeeds 300 sec, 20 sec, Is Chassis PowerCycled\n\u003e KEYWORD @{dump_entry_list} \u003d rest_client . Read Properties ${DUMP_ENTRY_URI}\n\u003e KEYWORD ${length} \u003d BuiltIn . Get Length ${dump_entry_list}\n\u003e KEYWORD BuiltIn . Should Be Equal As Integers ${length}, ${1}\n\u003e KEYWORD ${value} \u003d Collections . Get From List ${dump_entry_list}, 0\n\u003e KEYWORD @{split_value} \u003d String . Split String ${value}, /\n\u003e KEYWORD ${dump_id} \u003d Collections . Get From List ${split_value}, -1\n\u003e KEYWORD ${dump_size} \u003d rest_client . Read Attribute ${DUMP_ENTRY_URI}${dump_id}, Size\n\u003e KEYWORD BuiltIn . Should Be True 0 \u003c ${dump_size} \u003c 204800\n\u003e TEARDOWN Test Teardown Execution\n\u003e \n\u003e ------------------------------------------------------------------------------\n\u003e Test Bmc Dump :: Test dump functionality of OpenBMC.                  | PASS |\n\u003e 1 test, 1 passed, 0 failed\n\u003e \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\u003e Output:  /home/cs20/single-Test-Automation/reports/156/redfish/extended/test_bmc_dump.robot/output.xml\n\u003e Log:     /home/cs20/single-Test-Automation/reports/156/redfish/extended/test_bmc_dump.robot/log.html\n\u003e Report:  /home/cs20/single-Test-Automation/reports/156/redfish/extended/test_bmc_dump.robot/report.html\n\n",
      "revId": "6dbdad4f207db5aaeb11d88701bed39c966dbcf2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4c288240_9d170981",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000294
      },
      "writtenOn": "2022-01-04T09:01:19Z",
      "side": 1,
      "message": "Hi Rahul, Manash,\n\nAccording our investigation and test result. These two test items\n\"Verify Core Dump Size\" and \"Verify Dump After Host Watchdog Error Injection\"\nseems have dependence.\n\nI think that remove \"Run Keyword And Ignore Error  Redfish Delete All BMC Dumps\" this line\nmight be better change to fix this test item failed symptom.\n\nI found that another issue if I add \"Trigger Core Dump\" in \"Verify Dump After Host Watchdog Error Injection\"\nthis test item. That will cause \"2 !\u003d 1\" fail symptom.\n\nDue to test_bmc_dump.robot this test robot will execute these two test items sequentially.\n\"Trigger Core Dump\" be exectued in \"Verify Core Dump Size\", the first dump entry log will be created.\n\nHowever, if \"Trigger Core Dump\" be exectued again in \"Verify Dump After Host Watchdog Error Injection\"\nthat will cause the second dump entry log be created.\n\nBut, \"Verify Dump After Host Watchdog Error Injection\" test item will check there is only one dump entry.\nThus, we will got length \"2 !\u003d 1\" fail symptom when we run test_bmc_dump.robot.\n\n    # Verifying that there is only one dump\n    ${length}\u003d  Get length  ${dump_entry_list}\n    Should Be Equal As Integers  ${length}  ${1}\n\nIf there is any misunderstanding from my point of view.\nPlease share your suggestions to me. Thank you.\n\nSincerely,\nTim",
      "revId": "6dbdad4f207db5aaeb11d88701bed39c966dbcf2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e6df52f8_2152e22b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000028
      },
      "writtenOn": "2022-01-04T11:37:06Z",
      "side": 1,
      "message": "Let me check the history of this test case and get back.",
      "revId": "6dbdad4f207db5aaeb11d88701bed39c966dbcf2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "65ff96f1_4d4e6d28",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000294
      },
      "writtenOn": "2022-01-05T02:46:27Z",
      "side": 1,
      "message": "Thanks your help to review this test case.",
      "parentUuid": "e6df52f8_2152e22b",
      "revId": "6dbdad4f207db5aaeb11d88701bed39c966dbcf2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dd3a3254_19678eb7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000294
      },
      "writtenOn": "2022-01-05T02:46:27Z",
      "side": 1,
      "message": "Hi Rahul,\nThanks your help to review this test case.\nAnother thing need your help to confirm it.\n\nIn \"Test Teardown Execution\" that will execute \"Delete All BMC Dump\".\nHowever, when first test item finish the dump entry log will be deleted.\nThus, the second test item will got failed due to there is no more dump entry log.\n\nThus, the \"Delete All BMC Dump\" should be moved from \"Test Teardown Execution\"\nto \"Suite Teardown Execution\". \n\nSuite Teardown      Suite Teardown Execution\nSuite Teardown Execution\n    [Documentation]  Do the post-suite teardown.\n\n    Delete All BMC Dump",
      "revId": "6dbdad4f207db5aaeb11d88701bed39c966dbcf2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6b4c2b8_6564cc41",
        "filename": "redfish/extended/test_bmc_dump.robot",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1000028
      },
      "writtenOn": "2022-01-03T07:36:27Z",
      "side": 1,
      "message": "Trigger core dump is not related to this keyword. So we should not add this here. I guess the reason you are hitting the issue is because no dump is created as part of \"Trigger Host Watchdog Error\". Please run host watchdog error command manually and see if dump is getting created.",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 41,
        "endChar": 18
      },
      "revId": "6dbdad4f207db5aaeb11d88701bed39c966dbcf2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9c04477b_d3c197cf",
        "filename": "redfish/extended/test_bmc_dump.robot",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1000294
      },
      "writtenOn": "2022-01-03T08:19:14Z",
      "side": 1,
      "message": "\"Trigger Host Watchdog Error\" keyword just trigger host watchdog reset.\nThis keyword will not generate dump log.\n\nOnly \"Verify Core Dump Size\" this test case will use \"Trigger Core Dump\" to create dump log. And this \"Verify Dump After Host Watchdog Error Injection\" test case seems will according previous test case to check dump log.\n\nThat\u0027s why I remove this line \"Run Keyword And Ignore Error  Redfish Delete All BMC Dumps\" in previous patch.\n\nTrigger Host Watchdog Error\n    [Documentation]  Inject host watchdog timeout error via REST.\n    [Arguments]  ${milliseconds}\u003d1000  ${sleep_time}\u003d5s\n\n    # Description of argument(s):\n    # milliseconds  The time watchdog timer value in milliseconds (e.g. 1000 \u003d\n    #               1 second).\n    # sleep_time    Time delay for host watchdog error to get injected.\n    #               Default is 5 seconds.\n\n    ${data}\u003d  Create Dictionary\n    ...  data\u003dxyz.openbmc_project.State.Watchdog.Action.PowerCycle\n    ${status}  ${result}\u003d  Run Keyword And Ignore Error\n    ...  Read Attribute  ${HOST_WATCHDOG_URI}  ExpireAction\n    Run Keyword If  \u0027${status}\u0027 \u003d\u003d \u0027PASS\u0027\n    ...  Write Attribute  ${HOST_WATCHDOG_URI}  ExpireAction  data\u003d${data}",
      "parentUuid": "f6b4c2b8_6564cc41",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 41,
        "endChar": 18
      },
      "revId": "6dbdad4f207db5aaeb11d88701bed39c966dbcf2",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}